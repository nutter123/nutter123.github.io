---
title: 学生多选弹窗开发
date: 2023-02-10 12:11:26
tags: 
- 前端开发
categories:
- 前端
cover: /imgs/xuesheng1.png
toc: true
---

通过班级或分组进行学生选择,将其封装成弹窗组件,作为表单组件使用.

<!-- more -->

## 业务需求:
1. 按班级或分组进行学生选择,目标:快速定位学生;

## 功能需求:
1. 通过传入学生ids进行初始化;

## 设计
### 挂载时
1. 获取班级列表和分组列表,同时转化成树形结构,渲染出树形控件;
2. 通过班级列表,生成学生对象,包含学生对应的班级和分组;
3. 根据学生对象和传入学生id生成输入框文本;

### 开启弹窗时
1. 通过传入学生id,勾选树形控件;
2. 通过传入学生id,生成选择学生列表;
3. 生成勾选学生id副本,提交时使用,关闭时撤销;

### 勾选时
1. 单子节点勾选时,同步班级树控件,分组树控件和列表控件;
2. 因为学生id会出现相同的多个,所以节点id设置为 "父节点id-子节点id"形式,方便定位;
3. 节点data中存储学生id,当节点勾选时,通过学生id对象查找对应的所有班级和分组id,组合成节点id进行所有关联树形控件勾选;

## 问题
1. element的树形控件两个可以操作勾选的方法: setCheckedKeys,setChecked;
2. element的树形控件监听勾选事件: check-change;
3. 因此check-change当勾选父节点时,会将所有子节点事件也触发,所以在回调中不能操作树的默认勾选节点,而是对单个节点进行操作;因此使用setChecked而不是setCheckedKeys;

## 结果

<div class="justified-gallery">
<img src="/imgs/xuesheng1.png" alt="" />
</div>
